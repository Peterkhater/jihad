{% extends "base.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/projects.css' %}">
{% endblock %}

{% block main %}
<div class="project-detail-container" style="margin-top:150px">
    <!-- Main Project Section -->
    <article class="main-project">
        <div class="project-content">
            <div class="project-header">
                <div class="category-badge">{{ project.category.name }}</div>
            </div>
            <div class="project-details" style="padding-right:10px;">
                <div class="project-description">
                    <div  style="display:flex; align-item:center; justify-content:center; width:100%;">
                        <h1 class="project-title" >{{ project.title }}</h1>
                    </div>
                    {{ project.description|linebreaks }}
                </div>
            </div>
            <div class="project-image" style="">
                <img src="{{ project.image.url }}" alt="{{ project.title }}" style="max-height:100vh">
            </div>
            <div class="project-details" style="padding-right:10px;">    
                <div class="project-meta">
                    <div class="meta-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>تاريخ الإضافة: {{ project.created_at|date:"d M Y" }}</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-sync-alt"></i>
                        <span>آخر تحديث: {{ project.updated_at|date:"d M Y" }}</span>
                    </div>
                </div>
            </div>
            {% comment %} <div class="project-details" style="padding-right:10px;">
                <div class="project-description">
                    <h1 class="project-title">{{ project.title }}</h1>
                    {{ project.description|linebreaks }}
                </div>
                
                <div class="project-meta">
                    <div class="meta-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>تاريخ الإضافة: {{ project.created_at|date:"d M Y" }}</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-sync-alt"></i>
                        <span>آخر تحديث: {{ project.updated_at|date:"d M Y" }}</span>
                    </div>
                </div>
            </div> {% endcomment %}
        </div>
    </article>

    <!-- Related Projects Section -->
    <section class="related-projects">
        <h2 class="section-title">
            <i class="fas fa-folder-open"></i>
            مشاريع أخرى في {{ project.category.name }}
        </h2>
        
        <div class="projects-grid">
            {% for related_project in related_projects %}
            <a href="{% url 'project_detail' related_project.id %}" class="project-card">
                <div class="card-image">
                    <img src="{{ related_project.image.url }}" alt="{{ related_project.title }}">
                </div>
                <div class="card-content">
                    <h3>{{ related_project.title }}</h3>
                    <p>{{ related_project.description|truncatewords:30 }}</p>
                    <div class="card-meta">
                        <span class="date">{{ related_project.created_at|date:"d M Y" }}</span>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="no-projects">
                <i class="fas fa-info-circle"></i>
                لا توجد مشاريع أخرى في هذه الفئة حالياً
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock main %}